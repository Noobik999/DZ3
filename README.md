# Отчет к домашнему заданию №3 "Создание консольного калькулятора"

## Цели:

- Разработать программу-калькулятор для вычисления математических выражений, которые вводит пользователь.
- Реализовать алгоритм для перевода арифметических выражений из обыкновенной записи в обратную польскую нотацию.
- Разработать алгоритм для вычисления значений с помощью различных операторов и функций.
- Создать понятный интерфейс для взаимодействия с пользователем.

## Задачи работы:

- Реализовать разбор математических выражений на отдельные составляющие.
- Разработать алгоритм преобразования инфиксной записи в обратную польскую нотацию.
- Реализовать алгоритм для вычисления значения выражения в обратной польской нотации.
- Реализовать корректную обработку всех компонентов арифметического выражений (чисел, констант, переменных, операторов, функций, скобок).

## Теоретическая база:

- Обратная польская нотация (Reverse Polish Notation - RPN) — математическая нотация, в которой операторы записываются после операндов. В отличие от традиционной инфиксной -нотации, где операторы записываются между операндами (например, 5+8), в RPN выражение будет представлено в виде 5 8 +

## Преимущества RPN:

- Устраняет необходимость в скобках для определения приоритета операций.
- Позволяет реализовать алгоритм для вычисления с использованием стека.
- Исключает неоднозначность в порядке выполнения арифметических операций.
- Удобна в реализации на языке программирования c++.

## Описание принципа работы:

- Программа начинает работу с приветственного сообщения, информирующего пользователя о поддерживаемых операциях. После ввода выражения происходит его посимвольный анализ — -проход по всем символам строки с идентификацией этих элементов (числа, операторы, функции, скобки, переменные).

- Затем выполняется преобразование в постфиксную нотацию с помощью алгоритма сортировочной станции, использующего стек для временного хранения операторов.

- Если в выражении обнаружена переменная X, программа запрашивает ее значение у пользователя. Финальный этап - вычисление результата путем обработки обратной польской нотации записи с использованием стека для промежуточных результатов.

- Программа поддерживает следующие элементы выражений:

- Базовые арифметические операции (+, -, *, /)
- Математические функции (sin, cos, tg, ctg, exp)
- Константы (PI, E)
- Переменную X
- Унарный минус и скобки для задания приоритета

## Продемонстрируем принцип работы программы с помощью блок-схемы ниже:

```mermaid
flowchart TD
  Start["Начало программы"] --> Output1["Выводинструкцийo формате чисел и градусах"]
  Output1 --> Input["Ввод математического выражения пользователем"]
  Input --> CalIRPN["Вызов функции obrat_polsk_not"]
  CalIRPN --> ProcessRPN["Преобразование выражения в обратную польскую запись"]
  ProcessRPN --> CheckX{"Есть ли переменная x?"}
  CheckX -->|Да| AskX["Запрос значения x y пользователя"]
  CheckX -->|Нет| SkipX["Пропустить запрос х"]
  AskX --> BuildRPN["Построение ОПН"]
  SkipX --> BuildRPN
  BuildRPN --> OutputRPN["Вывод преобразованного выражения в ОПН"]
  OutputRPN --> CallSolve["Вызов функции reshenie_obr_polsk_not"]
  CallSolve --> Calc[Вычисление результата<br>по ОПН]
  Calc --> CheckError{"Есть ли ошибка вычисления?"}
  CheckError -->|Да| Error["Вывод сообщения об ошибке"]
  CheckError -->|He| OutputResult["Вывод результата"]
  Error --> End
  OutputResult --> End["Конец программы"]
  subgraph "Функция obrat_polsk_not"
    ProcessRPN --> Parse["Посимвольный анализ строки"]
    Parse --> Identify["Идентификация элементов: - Числа -Операторы - Функции sin/cos/tan/ctg/exp - Константы pi/e - Скобки - Переменная x"]
    Identify --> Shunting_Yard["Алгоритм сортировочной станции для ОПН"]
    Shunting_Yard --> ReturnRPN["Возврат вектора ОПН"]
  end
  subgraph "Функция
    reshenie_obr_polsk_not"
    Calc --> InitStack["Инициализация стека для вычислений"]
    InitStack -->
    ForEachToken["Обработка каждого токена ОПН"]
    ForEachToken --> IsNumber{"Токен - число?"}
    IsNumber -->|Да|
    PushNumber["Добавить число в стек"]
    IsNumber -->|Нет| IsFunction{"Токен - функция?"}
    IsFunction -->|Да|
    CalcFunction[Вычислить функцию, результат в стек]
    IsFunction -->|Нет| IsOperator{"Токен - оператор?"}
    IsOperator -->|Да|
    CalcOperation["Выполнить операцию, результат в стек"]
    CalcFunction --> NextToken["Следующий токен"]
    CalcOperation --> NextToken
    PushNumber --> NextToken
    IsOperator -->|Нет| NextToken
    NextToken --> MoreTokens{"Есть ещё токены?"}
    MoreTokens -->|Да| ForEachToken
    MoreTokens -->|Нет| GetResult["Взять результат c вершины стека"]
    GetResult --> ReturnResult["Вернуть результат"]
  end
```

- В ходе работы был успешно разработан консольный калькулятор, способный обрабатывать сложные математические выражения. Программа использует эффективные алгоритмы обработки математических выражений.

- Реализованная программа корректно обрабатывает приоритеты операций, унарные операции, математические функции и переменные.
